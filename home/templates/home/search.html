{%extends 'home/base.html'%} {%block content%}

<div class="text-center">
    <h1>{{State}}</h1>
    <p id='text_to_speak' hidden> {{text_to_speak}} </p>
    <img id='play_btn' src="../media/icons/play.png" width="30" height="30" class="text-center" />
</div>
<div class="container mt-5">
    <div class="row mb-5">
        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{Active}}</h3>
                    <p class="card-text" id='Active'> Active cases</p>
                </div>
            </div>
        </div>

        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{Recovered}}</h3>
                    <p class="card-text" id='Recovered'> Recovered</p>
                </div>
            </div>
        </div>

        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{Deaths}}</h3>
                    <p class="card-text" id='Deaths'> Deaths</p>
                </div>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{Confirmed}}</h3>
                    <p class="card-text" id='Confirmed'>Total Confirmed</p>
                </div>
            </div>
        </div>

        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{recover_percent}}%</h3>
                    <p class="card-text" id='Confirmed'>Recovered</p>
                </div>
            </div>
        </div>

        <div class="col-4">
            <div class="card text-white bg-dark text-center">
                <div class="card-body">
                    <h3 class='card-title'>{{death_percent}}%</h3>
                    <p class="card-text" id='Confirmed'>Deaths</p>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    if ('speechSynthesis' in window) {
        var txtInput = document.getElementById('text_to_speak').textContent;

        var tts = window.speechSynthesis;
        var toSpeak = new SpeechSynthesisUtterance(txtInput);

        toSpeak.pitch = 1;
        toSpeak.rate = 1.6;

        var play_btn = document.querySelector('#play_btn');
        play_btn.addEventListener('click', () => {
            if (!tts.speaking || tts.paused) {
                // without cancel it doesnt speak anymore, try removing later
                tts.cancel();
                tts.speak(toSpeak);
                console.log("spoken");
                play_btn.setAttribute("src", "../media/icons/pause.png")
            } else if (tts.speaking) {
                tts.pause();
                console.log("paused");
                play_btn.setAttribute("src", "../media/icons/play.png")

            }

        });
    } else {
        console.log('speechSynthesis not available');
        play_btn.style.display = 'none';
    }
</script>


{%endblock content%}